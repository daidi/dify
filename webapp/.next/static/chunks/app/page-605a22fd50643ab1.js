(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8479:function(e,t,r){Promise.resolve().then(r.bind(r,6847))},6847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ra}});var a,l,s,n,o,i,c=r(9268),d=r(6006),m=r(6708),u=r(8711),p=r(5205),h=r(9889);let g="conversationIdInfo";var x=function(){let[e,t]=(0,d.useState)([]),[r,a,l]=(0,h.Z)("-1"),s=e=>{var t,r;let a=(null===(t=globalThis.localStorage)||void 0===t?void 0:t.getItem(g))?JSON.parse((null===(r=globalThis.localStorage)||void 0===r?void 0:r.getItem(g))||""):{},l=a[e];return l},n="-1"===r,[o,i]=(0,d.useState)(null),c=()=>{o&&i((0,u.ZP)(o,e=>{Object.keys(e).forEach(t=>{e[t]=""})}))},[m,p]=(0,d.useState)(null),[x,f]=(0,d.useState)(null),[v,y]=(0,d.useState)(null);return{conversationList:e,setConversationList:t,currConversationId:r,getCurrConversationId:l,setCurrConversationId:function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],a(e),r&&"-1"!==e){var l,s,n;let r=(null===(l=globalThis.localStorage)||void 0===l?void 0:l.getItem(g))?JSON.parse((null===(s=globalThis.localStorage)||void 0===s?void 0:s.getItem(g))||""):{};r[t]=e,null===(n=globalThis.localStorage)||void 0===n||n.setItem(g,JSON.stringify(r))}},getConversationIdFromStorage:s,isNewConversation:n,currInputs:n?o:m,newConversationInputs:o,existConversationInputs:m,resetNewConversationInputs:c,setCurrInputs:n?i:p,currConversationInfo:n?x:v,setNewConversationInfo:f,setExistConversationInfo:y}},f=r(1387),v=r.n(f),y=r(3194),b=r(8581),w=r(3557),j=r(6540),C=r(5340);(0,r(2747).kr)({});let _=e=>{let{type:t="info",duration:r,message:a,children:l}=e;return"string"!=typeof a?null:(0,c.jsx)("div",{className:v()("fixed rounded-md p-4 my-4 mx-8 z-50","top-0","right-0","success"===t?"bg-green-50":"","error"===t?"bg-red-50":"","warning"===t?"bg-yellow-50":"","info"===t?"bg-blue-50":""),children:(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsxs)("div",{className:"flex-shrink-0",children:["success"===t&&(0,c.jsx)(b.Z,{className:"w-5 h-5 text-green-400","aria-hidden":"true"}),"error"===t&&(0,c.jsx)(w.Z,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),"warning"===t&&(0,c.jsx)(j.Z,{className:"w-5 h-5 text-yellow-400","aria-hidden":"true"}),"info"===t&&(0,c.jsx)(C.Z,{className:"w-5 h-5 text-blue-400","aria-hidden":"true"})]}),(0,c.jsxs)("div",{className:"ml-3",children:[(0,c.jsx)("h3",{className:v()("text-sm font-medium","success"===t?"text-green-800":"","error"===t?"text-red-800":"","warning"===t?"text-yellow-800":"","info"===t?"text-blue-800":""),children:a}),l&&(0,c.jsx)("div",{className:v()("mt-2 text-sm","success"===t?"text-green-700":"","error"===t?"text-red-700":"","warning"===t?"text-yellow-700":"","info"===t?"text-blue-700":""),children:l})]})]})})};_.notify=e=>{let{type:t,message:r,duration:a}=e;{let e=document.createElement("div"),l=(0,y.createRoot)(e);l.render((0,c.jsx)(_,{type:t,message:r,duration:a})),document.body.appendChild(e),setTimeout(()=>{e&&e.remove()},a||3e3)}};var N=r(9396),k=r(5154),S=r(107);let I=e=>{let{loading:t=!1,children:r,className:a}=e;return(0,c.jsxs)("div",{className:"inline-block text-gray-200 h-4 w-4 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] ".concat(t?"motion-reduce:animate-[spin_1.5s_linear_infinite]":"hidden"," ").concat(null!=a?a:""),role:"status",children:[(0,c.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."}),r]})},P=e=>{let{type:t,disabled:r,children:a,className:l,onClick:s,loading:n=!1}=e,o="cursor-pointer";return o="primary"===t?r||n?"bg-primary-600/75 cursor-not-allowed text-white":"bg-primary-600 hover:bg-primary-600/75 hover:shadow-md cursor-pointer text-white hover:shadow-sm":r?"border-solid border border-gray-200 bg-gray-200 cursor-not-allowed text-gray-800":"border-solid border border-gray-200 cursor-pointer text-gray-500 hover:bg-white hover:shadow-sm hover:border-gray-300",(0,c.jsxs)("div",{className:"flex justify-center items-center content-center h-9 leading-5 rounded-lg px-4 py-2 text-base ".concat(o," ").concat(l&&l),onClick:r?void 0:s,children:[a,(0,c.jsx)(I,{loading:n,className:"!text-white !h-3 !w-3 !border-2 !ml-1"})]})};var T=d.memo(P);function M(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}let L=e=>{let{copyRight:t,currentId:r,onCurrentIdChange:a,list:l}=e,{t:s}=(0,m.$G)();return(0,c.jsxs)("div",{className:"shrink-0 flex flex-col overflow-y-auto bg-white pc:w-[244px] tablet:w-[192px] mobile:w-[240px]  border-r border-gray-200 tablet:h-[calc(100vh_-_3rem)] mobile:h-screen",children:[l.length<20&&(0,c.jsx)("div",{className:"flex flex-shrink-0 p-4 !pb-0",children:(0,c.jsxs)(T,{onClick:()=>{a("-1")},className:"group block w-full flex-shrink-0 !justify-start !h-9 text-primary-600 items-center text-sm",children:[(0,c.jsx)(N.Z,{className:"mr-2 h-4 w-4"})," ",s("app.chat.newChat")]})}),(0,c.jsx)("nav",{className:"mt-4 flex-1 space-y-1 bg-white p-4 !pt-0",children:l.map(e=>{let t=e.id===r,l=t?S.Z:k.Z;return(0,c.jsxs)("div",{onClick:()=>a(e.id),className:M(t?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100 hover:text-gray-700","group flex items-center rounded-md px-2 py-2 text-sm font-medium cursor-pointer"),children:[(0,c.jsx)(l,{className:M(t?"text-primary-600":"text-gray-400 group-hover:text-gray-500","mr-3 h-5 w-5 flex-shrink-0"),"aria-hidden":"true"}),e.name]},e.id)})}),(0,c.jsx)("div",{className:"flex flex-shrink-0 pr-4 pb-4 pl-4",children:(0,c.jsxs)("div",{className:"text-gray-400 font-normal text-xs",children:["\xa9 ",t," ",new Date().getFullYear()]})})]})};var E=d.memo(L),R=r(6376),F=r.n(R),Z=r(6048),O=r(4414),U=r.n(O);let D=e=>{let{siteInfo:t}=e,{t:r}=(0,m.$G)();return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center py-2 text-xl font-medium text-gray-700 rounded-md",children:["\uD83D\uDC4F ",r("app.common.welcome")," ",t.title]}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})},A=e=>{let{html:t}=e;return(0,c.jsx)("div",{className:" box-border text-sm text-gray-700",dangerouslySetInnerHTML:{__html:t}})},V=()=>(0,c.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:"M2.75 1C2.75 0.723858 2.52614 0.5 2.25 0.5C1.97386 0.5 1.75 0.723858 1.75 1V1.75H1C0.723858 1.75 0.5 1.97386 0.5 2.25C0.5 2.52614 0.723858 2.75 1 2.75H1.75V3.5C1.75 3.77614 1.97386 4 2.25 4C2.52614 4 2.75 3.77614 2.75 3.5V2.75H3.5C3.77614 2.75 4 2.52614 4 2.25C4 1.97386 3.77614 1.75 3.5 1.75H2.75V1Z",fill:"#444CE7"}),(0,c.jsx)("path",{d:"M2.75 8.5C2.75 8.22386 2.52614 8 2.25 8C1.97386 8 1.75 8.22386 1.75 8.5V9.25H1C0.723858 9.25 0.5 9.47386 0.5 9.75C0.5 10.0261 0.723858 10.25 1 10.25H1.75V11C1.75 11.2761 1.97386 11.5 2.25 11.5C2.52614 11.5 2.75 11.2761 2.75 11V10.25H3.5C3.77614 10.25 4 10.0261 4 9.75C4 9.47386 3.77614 9.25 3.5 9.25H2.75V8.5Z",fill:"#444CE7"}),(0,c.jsx)("path",{d:"M6.96667 1.32051C6.8924 1.12741 6.70689 1 6.5 1C6.29311 1 6.10759 1.12741 6.03333 1.32051L5.16624 3.57494C5.01604 3.96546 4.96884 4.078 4.90428 4.1688C4.8395 4.2599 4.7599 4.3395 4.6688 4.40428C4.578 4.46884 4.46546 4.51604 4.07494 4.66624L1.82051 5.53333C1.62741 5.60759 1.5 5.79311 1.5 6C1.5 6.20689 1.62741 6.39241 1.82051 6.46667L4.07494 7.33376C4.46546 7.48396 4.578 7.53116 4.6688 7.59572C4.7599 7.6605 4.8395 7.7401 4.90428 7.8312C4.96884 7.922 5.01604 8.03454 5.16624 8.42506L6.03333 10.6795C6.1076 10.8726 6.29311 11 6.5 11C6.70689 11 6.89241 10.8726 6.96667 10.6795L7.83376 8.42506C7.98396 8.03454 8.03116 7.922 8.09572 7.8312C8.1605 7.7401 8.2401 7.6605 8.3312 7.59572C8.422 7.53116 8.53454 7.48396 8.92506 7.33376L11.1795 6.46667C11.3726 6.39241 11.5 6.20689 11.5 6C11.5 5.79311 11.3726 5.60759 11.1795 5.53333L8.92506 4.66624C8.53454 4.51604 8.422 4.46884 8.3312 4.40428C8.2401 4.3395 8.1605 4.2599 8.09572 4.1688C8.03116 4.078 7.98396 3.96546 7.83376 3.57494L6.96667 1.32051Z",fill:"#444CE7"})]}),H=e=>{let{className:t,onClick:r}=e,{t:a}=(0,m.$G)();return(0,c.jsxs)(T,{type:"primary",className:v()(t,"space-x-2 flex items-center ".concat(U().customBtn)),onClick:r,children:[(0,c.jsx)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10.5C18 14.366 14.418 17.5 10 17.5C8.58005 17.506 7.17955 17.1698 5.917 16.52L2 17.5L3.338 14.377C2.493 13.267 2 11.934 2 10.5C2 6.634 5.582 3.5 10 3.5C14.418 3.5 18 6.634 18 10.5ZM7 9.5H5V11.5H7V9.5ZM15 9.5H13V11.5H15V9.5ZM9 9.5H11V11.5H9V9.5Z",fill:"white"})}),a("app.chat.startChat")]})},B=e=>{let{className:t,onClick:r}=e,{t:a}=(0,m.$G)();return(0,c.jsxs)("div",{className:v()("px-2 flex space-x-1 items-center rounded-md  cursor-pointer",t),onClick:r,children:[(0,c.jsx)(Z.Z,{className:"w-3 h-3"}),(0,c.jsx)("span",{children:a("common.operation.edit")})]})},q=()=>(0,c.jsx)("div",{className:U().logo}),z=e=>{let{className:t,header:r,children:a,isFold:l}=e;return(0,c.jsxs)("div",{className:v()(l?"border border-indigo-100":F().boxShodow,t,"rounded-xl "),children:[(0,c.jsx)("div",{className:v()(l&&"rounded-b-xl","rounded-t-xl px-6 py-4 bg-indigo-25 text-xs"),children:r}),!l&&a&&(0,c.jsx)("div",{className:"rounded-b-xl p-6",children:a})]})},G=e=>{let{title:t,className:r}=e;return(0,c.jsxs)("div",{className:v()(r,"flex items-center space-x-1 text-indigo-600"),children:[(0,c.jsx)(V,{}),(0,c.jsx)("span",{className:"text-xs",children:t})]})},J=e=>{let{className:t,onConfirm:r,onCancel:a}=e,{t:l}=(0,m.$G)();return(0,c.jsxs)("div",{className:v()(t,"flex mt-3 space-x-2 mobile:ml-0 tablet:ml-[128px] text-sm"),children:[(0,c.jsx)(T,{className:"text-sm",type:"primary",onClick:r,children:l("common.operation.save")}),(0,c.jsx)(T,{className:"text-sm",onClick:a,children:l("common.operation.cancel")})]})};var $=d.memo(z),K=r(9472),W=r(2283),Y=r(6455),X=r(830);let Q=[{value:1,name:"option1"},{value:2,name:"option2"},{value:3,name:"option3"},{value:4,name:"option4"},{value:5,name:"option5"},{value:6,name:"option6"},{value:7,name:"option7"}],ee=e=>{let{className:t,items:r=Q,defaultValue:a=1,disabled:l=!1,onSelect:s,allowSearch:n=!0,bgClassName:o="bg-gray-100"}=e,[i,m]=(0,d.useState)(""),[u,p]=(0,d.useState)(!1),[h,g]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=null,t=r.find(e=>e.value===a);t&&(e=t),g(e)},[a]);let x=""===i?r:r.filter(e=>e.name.toLowerCase().includes(i.toLowerCase()));return(0,c.jsx)(K.h,{as:"div",disabled:l,value:h,className:t,onChange:e=>{l||(g(e),p(!1),s(e))},children:(0,c.jsxs)("div",{className:v()("relative"),children:[(0,c.jsxs)("div",{className:"group text-gray-800",children:[n?(0,c.jsx)(K.h.Input,{className:"w-full rounded-lg border-0 ".concat(o," py-1.5 pl-3 pr-10 shadow-sm sm:text-sm sm:leading-6 focus-visible:outline-none focus-visible:bg-gray-200 group-hover:bg-gray-200 cursor-not-allowed"),onChange:e=>{l||m(e.target.value)},displayValue:e=>null==e?void 0:e.name}):(0,c.jsx)(K.h.Button,{onClick:()=>{l||p(!u)},className:"flex items-center h-9 w-full rounded-lg border-0 ".concat(o," py-1.5 pl-3 pr-10 shadow-sm sm:text-sm sm:leading-6 focus-visible:outline-none focus-visible:bg-gray-200 group-hover:bg-gray-200"),children:null==h?void 0:h.name}),(0,c.jsx)(K.h.Button,{className:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none group-hover:bg-gray-200",onClick:()=>{l||p(!u)},children:u?(0,c.jsx)(W.Z,{className:"h-5 w-5"}):(0,c.jsx)(Y.Z,{className:"h-5 w-5"})})]}),x.length>0&&(0,c.jsx)(K.h.Options,{className:"absolute z-10 mt-1 px-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg border-gray-200 border-[0.5px] focus:outline-none sm:text-sm",children:x.map(e=>(0,c.jsx)(K.h.Option,{value:e,className:e=>{let{active:t}=e;return v()("relative cursor-default select-none py-2 pl-3 pr-9 rounded-lg hover:bg-gray-100 text-gray-700",t?"bg-gray-100":"")},children:t=>{let{selected:r}=t;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:v()("block truncate",r&&"font-normal"),children:e.name}),r&&(0,c.jsx)("span",{className:v()("absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700"),children:(0,c.jsx)(X.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})}},e.value))})]})})};var et=d.memo(ee);let er="".concat("516ef55a-7741-4892-a008-b16b536aab71"),ea="".concat("app-uYnAtUj2Nhkh5wph8p6Ih43A"),el={title:"Chat APP",description:"",copyright:"",privacy_policy:"",default_language:"zh-Hans"},es="/api",en=/\{\{([^}]+)\}\}/g,eo=e=>{let{conversationName:t,hasSetInputs:r,isPublicVersion:a,siteInfo:l,promptConfig:s,onStartChat:n,canEidtInpus:o,savedInputs:i,onInputsChange:u}=e,{t:p}=(0,m.$G)(),h=s.prompt_variables.length>0,[g,x]=(0,d.useState)(!0),[f,v]=(0,d.useState)((()=>{if(r)return i;let e={};return s&&s.prompt_variables.forEach(t=>{e[t.key]=""}),e})());(0,d.useEffect)(()=>{if(i)v(i);else{let e={};s&&s.prompt_variables.forEach(t=>{e[t.key]=""}),v(e)}},[i]);let y=(()=>{if(!s)return"";let e=s.prompt_template.replace(en,(e,t)=>"<span class='text-gray-800 font-bold'>".concat((null==f?void 0:f[t])?null==f?void 0:f[t]:e,"</span>"));return e})(),{notify:b}=_,w=e=>{b({type:"error",message:e,duration:3e3})},j=()=>(0,c.jsx)("div",{className:"space-y-3",children:s.prompt_variables.map(e=>(0,c.jsxs)("div",{className:"tablet:flex items-start mobile:space-y-2 tablet:space-y-0 mobile:text-xs tablet:text-sm",children:[(0,c.jsx)("label",{className:"flex-shrink-0 flex items-center tablet:leading-9 mobile:text-gray-700 tablet:text-gray-900 mobile:font-medium pc:font-normal ".concat(U().formLabel),children:e.name}),"select"===e.type&&(0,c.jsx)(et,{className:"w-full",defaultValue:null==f?void 0:f[e.key],onSelect:t=>{v({...f,[e.key]:t.value})},items:(e.options||[]).map(e=>({name:e,value:e})),allowSearch:!1,bgClassName:"bg-gray-50"}),"string"===e.type&&(0,c.jsx)("input",{placeholder:"".concat(e.name).concat(e.required?"":"(".concat(p("appDebug.variableTable.optional"),")")),value:(null==f?void 0:f[e.key])||"",onChange:t=>{v({...f,[e.key]:t.target.value})},className:"w-full flex-grow py-2 pl-3 pr-3 box-border rounded-lg bg-gray-50",maxLength:e.max_length||48}),"paragraph"===e.type&&(0,c.jsx)("textarea",{className:"w-full h-[104px] flex-grow py-2 pl-3 pr-3 box-border rounded-lg bg-gray-50",placeholder:"".concat(e.name).concat(e.required?"":"(".concat(p("appDebug.variableTable.optional"),")")),value:(null==f?void 0:f[e.key])||"",onChange:t=>{v({...f,[e.key]:t.target.value})}})]},e.key))}),C=()=>{let e=Object.values(f).length,t=s.prompt_variables.length,r=e<t||Object.values(f).filter(e=>""===e).length>0;return!r||(w(p("app.errorMessage.valueOfVarRequired")),!1)},N=()=>{C()&&n(f)},k=()=>(0,c.jsx)(J,{onConfirm:()=>{C()&&(u(f),x(!0))},onCancel:()=>{v(i),x(!0)}});return(0,c.jsxs)("div",{className:"relative mobile:min-h-[48px] tablet:min-h-[64px]",children:[r&&(0,c.jsx)("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between border-b border-gray-100 mobile:h-12 tablet:h-16 px-8 bg-white",children:(0,c.jsx)("div",{className:"text-gray-900",children:t})}),(0,c.jsxs)("div",{className:"mx-auto pc:w-[794px] max-w-full mobile:w-full px-3.5",children:[!r&&(0,c.jsx)("div",{className:"mobile:pt-[72px] tablet:pt-[128px] pc:pt-[200px]",children:h?(0,c.jsxs)($,{isFold:!1,header:(0,c.jsx)(D,{siteInfo:l}),children:[j(),(0,c.jsx)(H,{className:"mt-3 mobile:ml-0 tablet:ml-[128px]",onClick:N})]}):a?(0,c.jsxs)("div",{children:[(0,c.jsx)(D,{siteInfo:l}),(0,c.jsx)($,{isFold:!1,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(G,{title:p("app.chat.publicPromptConfigTitle"),className:"mb-1"}),(0,c.jsx)(A,{html:y})]}),children:(0,c.jsx)(H,{onClick:N})})]}):(0,c.jsx)($,{isFold:!1,header:(0,c.jsx)(D,{siteInfo:l}),children:(0,c.jsx)(H,{onClick:N})})}),r&&((a||o)&&h?(0,c.jsx)("div",{className:"pt-[88px] mb-5",children:a?o?(0,c.jsxs)($,{isFold:g,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(G,{title:p("app.chat.publicPromptConfigTitle"),className:"mb-1"}),(0,c.jsx)(A,{html:y}),g&&(0,c.jsxs)("div",{className:"flex items-center justify-between mt-3 border-t border-indigo-100 pt-4 text-xs text-indigo-600",children:[(0,c.jsx)("span",{className:"text-gray-700",children:p("app.chat.configStatusDes")}),(0,c.jsx)(B,{onClick:()=>x(!1)})]})]}),children:[j(),k()]}):(0,c.jsx)($,{isFold:!1,header:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(G,{title:p("app.chat.publicPromptConfigTitle"),className:"mb-1"}),(0,c.jsx)(A,{html:y})]})}):o&&h?(0,c.jsxs)($,{isFold:g,header:(0,c.jsxs)("div",{className:"flex items-center justify-between text-indigo-600",children:[(0,c.jsx)(G,{title:g?p("app.chat.configStatusDes"):p("app.chat.privatePromptConfigTitle")}),g&&(0,c.jsx)(B,{onClick:()=>x(!1)})]}),children:[j(),k()]}):null}):null),!r&&(0,c.jsxs)("div",{className:"mt-4 flex justify-between items-center h-8 text-xs text-gray-400",children:[l.privacy_policy?(0,c.jsxs)("div",{children:[p("app.chat.privacyPolicyLeft"),(0,c.jsx)("a",{className:"text-gray-500",href:l.privacy_policy,target:"_blank",children:p("app.chat.privacyPolicyMiddle")}),p("app.chat.privacyPolicyRight")]}):(0,c.jsx)("div",{}),(0,c.jsxs)("a",{className:"flex items-center pr-3 space-x-3",href:"https://dify.ai/",target:"_blank",children:[(0,c.jsx)("span",{className:"uppercase",children:p("app.chat.powerBy")}),(0,c.jsx)(q,{})]})]})]})]})};var ei=d.memo(eo);let ec=e=>(0,c.jsx)("div",{className:"mb-5 antialiased font-sans overflow-hidden shrink-0",children:(0,c.jsx)(ei,{...e})});var ed=d.memo(ec),em=r(5343),eu=r(3812),ep=r(1571),eh=r.n(ep);let eg=e=>{let{size:t="medium",rounded:r=!1,background:a,className:l}=e;return(0,c.jsx)("span",{className:v()(eh().appIcon,"medium"!==t&&eh()[t],r&&eh().rounded,null!=l?l:""),style:{background:a},children:"\uD83E\uDD16"})},ex=e=>{let{title:t,isMobile:r,onShowSideBar:a,onCreateNewChat:l}=e;return(0,c.jsxs)("div",{className:"shrink-0 flex items-center justify-between h-12 px-3 bg-gray-100",children:[r?(0,c.jsx)("div",{className:"flex items-center justify-center h-8 w-8 cursor-pointer",onClick:()=>null==a?void 0:a(),children:(0,c.jsx)(em.Z,{className:"h-4 w-4 text-gray-500"})}):(0,c.jsx)("div",{}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(eg,{size:"small"}),(0,c.jsx)("div",{className:" text-sm text-gray-800 font-bold",children:t})]}),r?(0,c.jsx)("div",{className:"flex items-center justify-center h-8 w-8 cursor-pointer",onClick:()=>null==l?void 0:l(),children:(0,c.jsx)(eu.Z,{className:"h-4 w-4 text-gray-500"})}):(0,c.jsx)("div",{})]})};var ef=d.memo(ex);let ev={json:"application/json",stream:"text/event-stream",form:"application/x-www-form-urlencoded; charset=UTF-8",download:"application/octet-stream"},ey={method:"GET",mode:"cors",credentials:"include",headers:new Headers({"Content-Type":ev.json}),redirect:"follow"},eb=(e,t,r,a,l,s,n)=>{var o;let i;if(!e.ok)throw Error("Network response was not ok");let c=null===(o=e.body)||void 0===o?void 0:o.getReader(),d=new TextDecoder("utf-8"),m="",u=!0;!function e(){let o=!1;null==c||c.read().then(c=>{if(c.done){r&&r();return}m+=d.decode(c.value,{stream:!0});let p=m.split("\n");try{p.forEach(e=>{if(e.startsWith("data: ")){try{i=JSON.parse(e.substring(6))}catch(e){t("",u,{conversationId:null==i?void 0:i.conversation_id,messageId:null==i?void 0:i.message_id});return}if(400===i.status||!i.event){t("",!1,{conversationId:void 0,messageId:"",errorMessage:null==i?void 0:i.message,errorCode:null==i?void 0:i.code}),o=!0,null==r||r(!0);return}"message"===i.event||"agent_message"===i.event?(t(i.answer.replace(/\\u[0-9a-f]{4}/g,(e,t)=>String.fromCharCode(parseInt(t,16))),u,{conversationId:i.conversation_id,taskId:i.task_id,messageId:i.id}),u=!1):"agent_thought"===i.event?null==a||a(i):"message_file"===i.event?null==n||n(i):"message_end"===i.event?null==l||l(i):"message_replace"===i.event&&(null==s||s(i))}}),m=p[p.length-1]}catch(e){t("",!1,{conversationId:void 0,messageId:"",errorMessage:"".concat(e)}),o=!0,null==r||r(!0);return}o||e()})}()},ew=(e,t,r)=>{let{needAllResponseContent:a}=r,l=Object.assign({},ey,t),s="".concat(es).concat(e.startsWith("/")?e:"/".concat(e)),{method:n,params:o,body:i}=l;if("GET"===n&&o){let e=[];Object.keys(o).forEach(t=>e.push("".concat(t,"=").concat(encodeURIComponent(o[t])))),-1===s.search(/\?/)?s+="?".concat(e.join("&")):s+="&".concat(e.join("&")),delete l.params}return i&&(l.body=JSON.stringify(i)),Promise.race([new Promise((e,t)=>{setTimeout(()=>{t(Error("request timeout"))},1e5)}),new Promise((e,t)=>{globalThis.fetch(s,l).then(t=>{let r=t.clone();if(!/^(2|3)\d{2}$/.test(t.status)){try{let e=t.json();if(401===t.status){_.notify({type:"error",message:"Invalid token"});return}new Promise(()=>{e.then(e=>{_.notify({type:"error",message:e.message})})})}catch(e){_.notify({type:"error",message:"".concat(e)})}return Promise.reject(r)}if(204===t.status){e({result:"success"});return}let s=l.headers.get("Content-type")===ev.download?t.blob():t.json();e(a?r:s)}).catch(e=>{_.notify({type:"error",message:e}),t(e)})})])},ej=e=>{let t={method:"POST",url:"".concat("".concat(es,"/file-upload")),data:{},...e};return new Promise((e,r)=>{let a=t.xhr;for(let e in a.open(t.method,t.url),t.headers)a.setRequestHeader(e,t.headers[e]);a.withCredentials=!0,a.onreadystatechange=function(){4===a.readyState&&(200===a.status?e({id:a.response}):r(a))},a.upload.onprogress=t.onprogress,a.send(t.data)})},eC=(e,t,r)=>{let{onData:a,onCompleted:l,onThought:s,onFile:n,onMessageEnd:o,onMessageReplace:i,onError:c}=r,d=Object.assign({},ey,{method:"POST"},t),m="".concat(es).concat(e.startsWith("/")?e:"/".concat(e)),{body:u}=d;u&&(d.body=JSON.stringify(u)),globalThis.fetch(m,d).then(e=>{if(!/^(2|3)\d{2}$/.test(e.status)){new Promise(()=>{e.json().then(e=>{_.notify({type:"error",message:e.message||"Server Error"})})}),null==c||c("Server Error");return}return eb(e,(e,t,r)=>{if(r.errorMessage){_.notify({type:"error",message:r.errorMessage});return}null==a||a(e,t,r)},()=>{null==l||l()},s,o,i,n)}).catch(e=>{_.notify({type:"error",message:e}),null==c||c(e)})},e_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return ew(e,t,r||{})},eN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e_(e,Object.assign({},t,{method:"GET"}),r)},ek=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e_(e,Object.assign({},t,{method:"POST"}),r)},eS=async(e,t)=>{let{onData:r,onCompleted:a,onThought:l,onFile:s,onError:n,getAbortController:o,onMessageEnd:i,onMessageReplace:c}=t;return eC("chat-messages",{body:{...e,response_mode:"streaming"}},{onData:r,onCompleted:a,onThought:l,onFile:s,onError:n,getAbortController:o,onMessageEnd:i,onMessageReplace:c})},eI=async()=>eN("conversations",{params:{limit:100,first_id:""}}),eP=async e=>eN("messages",{params:{conversation_id:e,limit:20,last_id:""}}),eT=async()=>eN("parameters"),eM=async e=>{let{url:t,body:r}=e;return ek(t,{body:r})},eL=async e=>ek("conversations/".concat(e,"/name"),{body:{auto_generate:!0}});(a=n||(n={})).low="low",a.high="high",(l=o||(o={})).all="all",l.local_file="local_file",l.remote_url="remote_url";var eE=r(9549),eR=r(4908),eF=r(8334),eZ=r.n(eF),eO=r(5810),eU=r(1938),eD=r(8138),eA=r.n(eD);let eV=e=>{let{type:t}=e;return(0,c.jsx)("div",{className:"".concat(eA()["dot-flashing"]," ").concat(eA()[t])})};var eH=d.memo(eV),eB=r(6595),eq=r.n(eB),ez=r(8431),eG=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"x-close"},"children":[{"type":"element","name":"path","attributes":{"id":"Icon","d":"M12 4L4 12M4 4L12 12","stroke":"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]}]},"name":"XClose"}');function eJ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((t,r)=>{let a=e[r];switch(r=(r=r.replace(/([-]\w)/g,e=>e[1].toUpperCase())).replace(/([:]\w)/g,e=>e[1].toUpperCase())){case"class":t.className=a,delete t.class;break;case"style":t.style=a.split(";").reduce((e,t)=>{let r=null==t?void 0:t.split(":");if(r[0]&&r[1]){let t=r[0].replace(/([-]\w)/g,e=>e[1].toUpperCase());e[t]=r[1]}return e},{});break;default:t[r]=a}return t},{})}let e$=(0,d.forwardRef)((e,t)=>{let{data:r,className:a,onClick:l,style:s,...n}=e;return function e(t,r,a){return a?d.createElement(t.name,{key:r,...eJ(t.attributes),...a},(t.children||[]).map((a,l)=>e(a,"".concat(r,"-").concat(t.name,"-").concat(l)))):d.createElement(t.name,{key:r,...eJ(t.attributes)},(t.children||[]).map((a,l)=>e(a,"".concat(r,"-").concat(t.name,"-").concat(l))))}(r.icon,"svg-".concat(r.name),{className:a,onClick:l,style:s,"data-icon":r.name,"aria-hidden":"true",...n,ref:t})}),eK=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:eG}));eK.displayName="XClose";let eW=e=>{let{url:t,onCancel:r}=e;return(0,ez.createPortal)((0,c.jsxs)("div",{className:"fixed inset-0 p-8 flex items-center justify-center bg-black/80 z-[1000]",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("img",{alt:"preview image",src:t,className:"max-w-full max-h-full"}),(0,c.jsx)("div",{className:"absolute top-6 right-6 flex items-center justify-center w-8 h-8 bg-white/[0.08] rounded-lg backdrop-blur-[2px] cursor-pointer",onClick:r,children:(0,c.jsx)(eK,{className:"w-4 h-4 text-white"})})]}),document.body)},eY=e=>1===e?{maxWidth:"100%"}:2===e||4===e?{width:"calc(50% - 4px)"}:{width:"calc(33.3333% - 5.3333px)"},eX=e=>{let{srcs:t}=e,[r,a]=(0,d.useState)(""),l=t.length,s=eY(l);return(0,c.jsxs)("div",{className:v()(eq()["img-".concat(l)],"flex flex-wrap"),children:[t.map((e,t)=>(0,c.jsx)("img",{className:eq().item,style:s,src:e,alt:"",onClick:()=>a(e)},t)),r&&(0,c.jsx)(eW,{url:r,onCancel:()=>a("")})]})};var eQ=d.memo(eX);let e0=e=>{let{isRequest:t,toolName:r,content:a}=e,{t:l}=(0,m.$G)();return(0,c.jsxs)("div",{className:"rounded-md bg-gray-100 overflow-hidden border border-black/5",children:[(0,c.jsxs)("div",{className:"flex items-center px-2 py-1 leading-[18px] bg-gray-50 uppercase text-xs font-medium text-gray-500",children:[l("tools.thought.".concat(t?"requestTitle":"responseTitle"))," ",r]}),(0,c.jsx)("div",{className:"p-2 border-t border-black/5 leading-4 text-xs text-gray-700",children:a})]})};var e1=d.memo(e0),e5=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"clip-path":"url(#clip0_6037_51601)"},"children":[{"type":"element","name":"path","attributes":{"d":"M7.99992 1.33398V4.00065M7.99992 12.0007V14.6673M3.99992 8.00065H1.33325M14.6666 8.00065H11.9999M12.7189 12.7196L10.8333 10.834M12.7189 3.33395L10.8333 5.21956M3.28097 12.7196L5.16659 10.834M3.28097 3.33395L5.16659 5.21956","stroke":"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]},{"type":"element","name":"defs","attributes":{},"children":[{"type":"element","name":"clipPath","attributes":{"id":"clip0_6037_51601"},"children":[{"type":"element","name":"rect","attributes":{"width":"16","height":"16","fill":"white"},"children":[]}]}]}]},"name":"Loading02"}');let e6=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:e5}));e6.displayName="Loading02";var e2=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"12","height":"12","viewBox":"0 0 12 12","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"chevron-down"},"children":[{"type":"element","name":"path","attributes":{"id":"Icon","d":"M3 4.5L6 7.5L9 4.5","stroke":"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]}]},"name":"ChevronDown"}');let e3=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:e2}));e3.displayName="ChevronDown";var e4=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"check-circle"},"children":[{"type":"element","name":"path","attributes":{"id":"Solid","fill-rule":"evenodd","clip-rule":"evenodd","d":"M8 0.666626C3.94992 0.666626 0.666672 3.94987 0.666672 7.99996C0.666672 12.05 3.94992 15.3333 8 15.3333C12.0501 15.3333 15.3333 12.05 15.3333 7.99996C15.3333 3.94987 12.0501 0.666626 8 0.666626ZM11.4714 6.47136C11.7318 6.21101 11.7318 5.7889 11.4714 5.52855C11.2111 5.26821 10.7889 5.26821 10.5286 5.52855L7 9.05715L5.47141 7.52855C5.21106 7.2682 4.78895 7.2682 4.5286 7.52855C4.26825 7.7889 4.26825 8.21101 4.5286 8.47136L6.5286 10.4714C6.78895 10.7317 7.21106 10.7317 7.47141 10.4714L11.4714 6.47136Z","fill":"currentColor"},"children":[]}]}]},"name":"CheckCircle"}');let e7=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:e4}));e7.displayName="CheckCircle";var e8=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"12","height":"12","viewBox":"0 0 12 12","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"clip-path":"url(#clip0_7847_32895)"},"children":[{"type":"element","name":"path","attributes":{"d":"M10.5 2.5C10.5 3.32843 8.48528 4 6 4C3.51472 4 1.5 3.32843 1.5 2.5M10.5 2.5C10.5 1.67157 8.48528 1 6 1C3.51472 1 1.5 1.67157 1.5 2.5M10.5 2.5V9.5C10.5 10.33 8.5 11 6 11C3.5 11 1.5 10.33 1.5 9.5V2.5M10.5 6C10.5 6.83 8.5 7.5 6 7.5C3.5 7.5 1.5 6.83 1.5 6","stroke":"#667085","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]},{"type":"element","name":"defs","attributes":{},"children":[{"type":"element","name":"clipPath","attributes":{"id":"clip0_7847_32895"},"children":[{"type":"element","name":"rect","attributes":{"width":"12","height":"12","fill":"white"},"children":[]}]}]}]},"name":"DataSet"}');let e9=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:e8}));e9.displayName="DataSet";let te=(e,t)=>{if(e.startsWith("dataset-"))return(0,c.jsx)(e9,{className:"shrink-0"});let r=t[e];return r?"string"==typeof r?(0,c.jsx)("div",{className:"w-3 h-3 bg-cover bg-center rounded-[3px] shrink-0",style:{backgroundImage:"url(".concat(r,")")}}):(0,c.jsx)(eg,{className:"rounded-[3px] shrink-0",size:"xs",icon:null==r?void 0:r.content,background:null==r?void 0:r.background}):null},tt=e=>{let{payload:t,allToolIcons:r={}}=e,{t:a}=(0,m.$G)(),{name:l,input:s,isFinished:n,output:o}=t,i=l.startsWith("dataset-")?a("dataset.knowledge"):l,[u,p]=(0,d.useState)(!1),h=te(i,r);return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:v()(!u&&"shadow-sm",!u&&"inline-block","max-w-full overflow-x-auto bg-white rounded-md"),children:[(0,c.jsxs)("div",{className:v()("flex items-center h-7 px-2 cursor-pointer"),onClick:()=>p(!u),children:[!n&&(0,c.jsx)(e6,{className:"w-3 h-3 text-gray-500 animate-spin shrink-0"}),n&&!u&&(0,c.jsx)(e7,{className:"w-3 h-3 text-[#12B76A] shrink-0"}),n&&u&&h,(0,c.jsx)("span",{className:"mx-1 text-xs font-medium text-gray-500 shrink-0",children:a("tools.thought.".concat(n?"used":"using"))}),(0,c.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",title:i,children:i}),(0,c.jsx)(e3,{className:v()(u&&"rotate-180","ml-1 w-3 h-3 text-gray-500 select-none cursor-pointer shrink-0")})]}),u&&(0,c.jsxs)("div",{className:"border-t border-black/5 p-2 space-y-2 ",children:[(0,c.jsx)(e1,{isRequest:!0,toolName:i,content:s}),o&&(0,c.jsx)(e1,{isRequest:!1,toolName:i,content:o})]})]})})};var tr=d.memo(tt);function ta(e,t,r){if(t)try{return JSON.parse(e)[r]}catch(e){}return e}let tl=e=>{let{thought:t,allToolIcons:r,isFinished:a}=e,[l,s]=(()=>{try{if(Array.isArray(JSON.parse(t.tool)))return[JSON.parse(t.tool),!0]}catch(e){}return[[t.tool],!1]})(),n=l.map((e,r)=>({name:e,input:ta(t.tool_input,s,r),output:ta(t.observation,s,r),isFinished:a}));return(0,c.jsx)("div",{className:"my-2 space-y-2",children:n.map((e,t)=>(0,c.jsx)(tr,{payload:e,allToolIcons:r},t))})};var ts=d.memo(tl);let tn="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";function to(e){let t="";for(let r=e;r>0;--r)t+=tn[Math.floor(Math.random()*tn.length)];return t}var ti=r(1514);r(1657);let tc=e=>{let{selector:t,content:r,position:a="top",children:l,htmlContent:s,className:n,clickable:o}=e;return(0,c.jsxs)("div",{className:"tooltip-container",children:[d.cloneElement(l,{"data-tooltip-id":t}),(0,c.jsx)(ti.u,{id:t,content:r,className:v()("!bg-white !text-xs !font-normal !text-gray-700 !shadow-lg !opacity-100",n),place:a,clickable:o,children:s&&s})]})};var td=r(1885);r(2790);var tm=r(3681),tu=r(809),tp=r(8814),th=r(8441),tg=r(2031),tx=r(5257);function tf(e){return(0,c.jsx)("div",{className:"markdown-body",children:(0,c.jsx)(td.D,{remarkPlugins:[tm.Z,th.Z,tu.Z],rehypePlugins:[tp.Z],components:{code(e){let{node:t,inline:r,className:a,children:l,...s}=e,n=/language-(\w+)/.exec(a||"");return!r&&n?(0,c.jsx)(tg.Z,{...s,children:String(l).replace(/\n$/,""),style:tx.Z,language:n[1],showLineNumbers:!0,PreTag:"div"}):(0,c.jsx)("code",{...s,className:a,children:l})}},linkTarget:"_blank",children:e.content})})}let tv=e=>{let{innerContent:t,onClick:r,className:a}=e;return(0,c.jsx)("div",{className:"relative box-border flex items-center justify-center h-7 w-7 p-0.5 rounded-lg bg-white cursor-pointer text-gray-500 hover:text-gray-800 ".concat(null!=a?a:""),style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -2px rgba(0, 0, 0, 0.05)"},onClick:r&&r,children:t})},ty=e=>{let{isLike:t}=e;return t?(0,c.jsx)(eO.Z,{className:"w-4 h-4"}):(0,c.jsx)(eU.Z,{className:"w-4 h-4"})},tb=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:"rounded-lg h-6 w-6 flex items-center justify-center hover:bg-gray-100",children:t})},tw=e=>{let{item:t,feedbackDisabled:r=!1,onFeedback:a,isResponsing:l,allToolIcons:s}=e,{id:n,content:o,feedback:i,agent_thoughts:d}=t,u=!!d&&d.length>0,{t:p}=(0,m.$G)(),h=e=>e?e.filter(e=>"image"===e.type&&"assistant"===e.belongs_to):[],g=(0,c.jsx)("div",{children:null==d?void 0:d.map((e,t)=>(0,c.jsxs)("div",{children:[e.thought&&(0,c.jsx)(tf,{content:e.thought}),!!e.tool&&(0,c.jsx)(ts,{thought:e,allToolIcons:s||{},isFinished:!!e.observation||!l}),h(e.message_files).length>0&&(0,c.jsx)(eQ,{srcs:h(e.message_files).map(e=>e.url)})]},t))});return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)("div",{className:"".concat(eZ().answerIcon," w-10 h-10 shrink-0"),children:l&&(0,c.jsx)("div",{className:eZ().typeingIcon,children:(0,c.jsx)(eH,{type:"avatar"})})}),(0,c.jsx)("div",{className:"".concat(eZ().answerWrap),children:(0,c.jsxs)("div",{className:"".concat(eZ().answer," relative text-sm text-gray-900"),children:[(0,c.jsx)("div",{className:"ml-2 py-3 px-4 bg-gray-100 rounded-tr-2xl rounded-b-2xl",children:!l||(u?o||0!==(d||[]).filter(e=>!!e.thought||!!e.tool).length:o)?u?g:(0,c.jsx)(tf,{content:o}):(0,c.jsx)("div",{className:"flex items-center justify-center w-6 h-5",children:(0,c.jsx)(eH,{type:"text"})})}),(0,c.jsxs)("div",{className:"absolute top-[-14px] right-[-14px] flex flex-row justify-end gap-1",children:[!r&&!t.feedbackDisabled&&(0,c.jsx)("div",{className:"".concat(eZ().itemOperation," flex gap-2"),children:(null==i?void 0:i.rating)?null:(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsx)(tc,{selector:"user-feedback-".concat(to(16)),content:p("common.operation.like"),children:tv({innerContent:(0,c.jsx)(tb,{children:(0,c.jsx)(ty,{isLike:!0})}),onClick:()=>null==a?void 0:a(n,{rating:"like"})})}),(0,c.jsx)(tc,{selector:"user-feedback-".concat(to(16)),content:p("common.operation.dislike"),children:tv({innerContent:(0,c.jsx)(tb,{children:(0,c.jsx)(ty,{isLike:!1})}),onClick:()=>null==a?void 0:a(n,{rating:"dislike"})})})]})}),!r&&(e=>{if(!e)return null;let t="like"===e;return(0,c.jsx)(tc,{selector:"user-feedback-".concat(to(16)),content:t?"取消赞同":"取消反对",children:(0,c.jsx)("div",{className:"relative box-border flex items-center justify-center h-7 w-7 p-0.5 rounded-lg bg-white cursor-pointer text-gray-500 hover:text-gray-800",style:{boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -2px rgba(0, 0, 0, 0.05)"},onClick:async()=>{await (null==a?void 0:a(n,{rating:null}))},children:(0,c.jsx)("div",{className:"".concat(t?"text-primary-600 bg-primary-100 hover:bg-primary-200":"text-red-600 bg-red-100 hover:bg-red-200"," rounded-lg h-6 w-6 flex items-center justify-center"),children:(0,c.jsx)(ty,{isLike:t})})})})})(null==i?void 0:i.rating)]})]})})]})},n)};var tj=d.memo(tw);let tC=e=>{let{id:t,content:r,useCurrentUserAvatar:a,imgSrcs:l}=e;return(0,c.jsxs)("div",{className:"flex items-start justify-end",children:[(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"".concat(eZ().question," relative text-sm text-gray-900"),children:(0,c.jsxs)("div",{className:"mr-2 py-3 px-4 bg-blue-500 rounded-tl-2xl rounded-b-2xl",children:[l&&l.length>0&&(0,c.jsx)(eQ,{srcs:l}),(0,c.jsx)(tf,{content:r})]})})}),a?(0,c.jsx)("div",{className:"w-10 h-10 shrink-0 leading-10 text-center mr-2 rounded-full bg-primary-600 text-white",children:""[0].toLocaleUpperCase()}):(0,c.jsx)("div",{className:"".concat(eZ().questionIcon," w-10 h-10 shrink-0 ")})]},t)};var t_=d.memo(tC);let tN=e=>{let{file:t,onProgressCallback:r,onSuccessCallback:a,onErrorCallback:l}=e,s=new FormData;s.append("file",t);let n=e=>{if(e.lengthComputable){let t=Math.floor(e.loaded/e.total*100);r(t)}};ej({xhr:new XMLHttpRequest,data:s,onprogress:n}).then(e=>{a(e)}).catch(()=>{l()})},tk=e=>{let{children:t,onUpload:r,limit:a,disabled:l}=e,[s,n]=(0,d.useState)(!1),{notify:i}=_,{t:u}=(0,m.$G)(),p=e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!l)return;if(a&&l.size>1048576*a){i({type:"error",message:u("common.imageUploader.uploadFromComputerLimit",{size:a})});return}let s=new FileReader;s.addEventListener("load",()=>{let e={type:o.local_file,_id:"".concat(Date.now()),fileId:"",file:l,url:s.result,base64Url:s.result,progress:0};r(e),tN({file:e.file,onProgressCallback:t=>{r({...e,progress:t})},onSuccessCallback:t=>{r({...e,fileId:t.id,progress:100})},onErrorCallback:()=>{i({type:"error",message:u("common.imageUploader.uploadFromComputerUploadError")}),r({...e,progress:-1})}})},!1),s.addEventListener("error",()=>{i({type:"error",message:u("common.imageUploader.uploadFromComputerReadError")})},!1),s.readAsDataURL(l)};return(0,c.jsxs)("div",{className:"relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[t(s),(0,c.jsx)("input",{className:"\n          absolute block inset-0 opacity-0 text-[0] w-full\n          ".concat(l?"cursor-not-allowed":"cursor-pointer","\n        "),onClick:e=>e.target.value="",type:"file",accept:".png, .jpg, .jpeg, .webp, .gif",onChange:p,disabled:l})]})},tS=/^(https?|ftp):\/\//,tI=e=>{let{onUpload:t}=e,{t:r}=(0,m.$G)(),[a,l]=(0,d.useState)(""),s=()=>{let e={type:o.remote_url,_id:"".concat(Date.now()),fileId:"",progress:tS.test(a)?0:-1,url:a};t(e)};return(0,c.jsxs)("div",{className:"flex items-center pl-1.5 pr-1 h-8 border border-gray-200 bg-white shadow-xs rounded-lg",children:[(0,c.jsx)("input",{className:"grow mr-0.5 px-1 h-[18px] text-[13px] outline-none appearance-none",value:a,onChange:e=>l(e.target.value),placeholder:r("common.imageUploader.pasteImageLinkInputPlaceholder")||""}),(0,c.jsx)(T,{type:"primary",className:"!h-6 text-xs font-medium",disabled:!a,onClick:s,children:r("common.operation.ok")})]})};var tP=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"image-plus"},"children":[{"type":"element","name":"path","attributes":{"id":"Icon","d":"M8.33333 2.00016H5.2C4.0799 2.00016 3.51984 2.00016 3.09202 2.21815C2.71569 2.4099 2.40973 2.71586 2.21799 3.09218C2 3.52001 2 4.08006 2 5.20016V10.8002C2 11.9203 2 12.4803 2.21799 12.9081C2.40973 13.2845 2.71569 13.5904 3.09202 13.7822C3.51984 14.0002 4.07989 14.0002 5.2 14.0002H11.3333C11.9533 14.0002 12.2633 14.0002 12.5176 13.932C13.2078 13.7471 13.7469 13.208 13.9319 12.5178C14 12.2635 14 11.9535 14 11.3335M12.6667 5.3335V1.3335M10.6667 3.3335H14.6667M7 5.66683C7 6.40321 6.40305 7.00016 5.66667 7.00016C4.93029 7.00016 4.33333 6.40321 4.33333 5.66683C4.33333 4.93045 4.93029 4.3335 5.66667 4.3335C6.40305 4.3335 7 4.93045 7 5.66683ZM9.99336 7.94559L4.3541 13.0722C4.03691 13.3605 3.87831 13.5047 3.86429 13.6296C3.85213 13.7379 3.89364 13.8453 3.97546 13.9172C4.06985 14.0002 4.28419 14.0002 4.71286 14.0002H10.9707C11.9301 14.0002 12.4098 14.0002 12.7866 13.839C13.2596 13.6366 13.6365 13.2598 13.8388 12.7868C14 12.41 14 11.9303 14 10.9708C14 10.648 14 10.4866 13.9647 10.3363C13.9204 10.1474 13.8353 9.9704 13.7155 9.81776C13.6202 9.6963 13.4941 9.59546 13.242 9.3938L11.3772 7.90194C11.1249 7.7001 10.9988 7.59919 10.8599 7.56357C10.7374 7.53218 10.6086 7.53624 10.4884 7.57529C10.352 7.61959 10.2324 7.72826 9.99336 7.94559Z","stroke":"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]}]},"name":"ImagePlus"}');let tT=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:tP}));tT.displayName="ImagePlus";var tM=r(4372),tL=r(3403),tE=r(4466);let tR=d.createContext(null);function tF(){let e=d.useContext(tR);if(null==e)throw Error("PortalToFollowElem components must be wrapped in <PortalToFollowElem />");return e}function tZ(e){let{children:t,...r}=e,a=function(){let{placement:e="bottom",open:t,offset:r=0,onOpenChange:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,tM.YF)({placement:e,open:t,onOpenChange:a,whileElementsMounted:tL.Me,middleware:[(0,tE.cv)(r),(0,tL.RR)({crossAxis:e.includes("-"),fallbackAxisSideDirection:"start",padding:5}),(0,tL.uY)({padding:5})]}),s=l.context,n=(0,tM.XI)(s,{move:!1,enabled:null==t}),o=(0,tM.KK)(s,{enabled:null==t}),i=(0,tM.bQ)(s),c=(0,tM.qs)(s,{role:"tooltip"}),m=(0,tM.NI)([n,o,i,c]);return d.useMemo(()=>({open:t,setOpen:a,...m,...l}),[t,a,m,l])}(r);return(0,c.jsx)(tR.Provider,{value:a,children:t})}let tO=d.forwardRef((e,t)=>{let{children:r,asChild:a=!1,...l}=e,s=tF(),n=r.ref,o=(0,tM.qq)([s.refs.setReference,t,n]);return a&&d.isValidElement(r)?d.cloneElement(r,s.getReferenceProps({ref:o,...l,...r.props,"data-state":s.open?"open":"closed"})):(0,c.jsx)("div",{ref:o,className:"inline-block","data-state":s.open?"open":"closed",...s.getReferenceProps(l),children:r})});tO.displayName="PortalToFollowElemTrigger";let tU=d.forwardRef((e,t)=>{let{style:r,...a}=e,l=tF(),s=(0,tM.qq)([l.refs.setFloating,t]);return l.open?(0,c.jsx)(tM.ll,{children:(0,c.jsx)("div",{ref:s,style:{...l.floatingStyles,...r},...l.getFloatingProps(a)})}):null});tU.displayName="PortalToFollowElemContent";var tD=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"Left Icon","clip-path":"url(#clip0_12728_40636)"},"children":[{"type":"element","name":"path","attributes":{"id":"Icon","d":"M10.6654 8.00016L7.9987 5.3335M7.9987 5.3335L5.33203 8.00016M7.9987 5.3335V10.6668M14.6654 8.00016C14.6654 11.6821 11.6806 14.6668 7.9987 14.6668C4.3168 14.6668 1.33203 11.6821 1.33203 8.00016C1.33203 4.31826 4.3168 1.3335 7.9987 1.3335C11.6806 1.3335 14.6654 4.31826 14.6654 8.00016Z","stroke":"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]},{"type":"element","name":"defs","attributes":{},"children":[{"type":"element","name":"clipPath","attributes":{"id":"clip0_12728_40636"},"children":[{"type":"element","name":"rect","attributes":{"width":"16","height":"16","fill":"white"},"children":[]}]}]}]},"name":"Upload03"}');let tA=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:tD}));tA.displayName="Upload03";let tV=e=>{let{onUpload:t,disabled:r,limit:a}=e;return(0,c.jsx)(tk,{onUpload:t,disabled:r,limit:a,children:e=>(0,c.jsx)("div",{className:"\n            relative flex items-center justify-center w-8 h-8 rounded-lg cursor-pointer\n            ".concat(e&&"bg-gray-100","\n          "),children:(0,c.jsx)(tT,{className:"w-4 h-4 text-gray-500"})})})},tH=e=>{let{methods:t,onUpload:r,disabled:a,limit:l}=e,{t:s}=(0,m.$G)(),[n,i]=(0,d.useState)(!1),u=t.find(e=>e===o.local_file),p=e=>{i(!1),r(e)},h=()=>{a||i(e=>!e)};return(0,c.jsxs)(tZ,{open:n,onOpenChange:i,placement:"top-start",children:[(0,c.jsx)(tO,{onClick:h,children:(0,c.jsx)("div",{className:"\n          relative flex items-center justify-center w-8 h-8 hover:bg-gray-100 rounded-lg\n          ".concat(a?"cursor-not-allowed":"cursor-pointer","\n        "),children:(0,c.jsx)(tT,{className:"w-4 h-4 text-gray-500"})})}),(0,c.jsx)(tU,{className:"z-50",children:(0,c.jsxs)("div",{className:"p-2 w-[260px] bg-white rounded-lg border-[0.5px] border-gray-200 shadow-lg",children:[(0,c.jsx)(tI,{onUpload:p}),u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex items-center mt-2 px-2 text-xs font-medium text-gray-400",children:[(0,c.jsx)("div",{className:"mr-3 w-[93px] h-[1px] bg-gradient-to-l from-[#F3F4F6]"}),"OR",(0,c.jsx)("div",{className:"ml-3 w-[93px] h-[1px] bg-gradient-to-r from-[#F3F4F6]"})]}),(0,c.jsx)(tk,{onUpload:p,limit:l,children:e=>(0,c.jsxs)("div",{className:"\n                        flex items-center justify-center h-8 text-[13px] font-medium text-[#155EEF] rounded-lg cursor-pointer\n                        ".concat(e&&"bg-primary-50","\n                      "),children:[(0,c.jsx)(tA,{className:"mr-1 w-4 h-4"}),s("common.imageUploader.uploadFromComputer")]})})]})]})})]})},tB=e=>{let{settings:t,onUpload:r,disabled:a}=e,l=1===t.transfer_methods.length&&t.transfer_methods[0]===o.local_file;return l?(0,c.jsx)(tV,{onUpload:r,disabled:a,limit:+t.image_file_size_limit}):(0,c.jsx)(tH,{methods:t.transfer_methods,onUpload:r,disabled:a,limit:+t.image_file_size_limit})};var tq=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"24","height":"24","viewBox":"0 0 24 24","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"path","attributes":{"d":"M2 10C2 10 4.00498 7.26822 5.63384 5.63824C7.26269 4.00827 9.5136 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.89691 21 4.43511 18.2543 3.35177 14.5M2 10V4M2 10H8","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},"children":[]}]},"name":"RefreshCcw01"}');let tz=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:tq}));tz.displayName="RefreshCcw01";var tG=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"12","height":"12","viewBox":"0 0 12 12","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"alert-triangle"},"children":[{"type":"element","name":"path","attributes":{"id":"Solid","fill-rule":"evenodd","clip-rule":"evenodd","d":"M6.40616 0.834185C6.14751 0.719172 5.85222 0.719172 5.59356 0.834185C5.3938 0.923011 5.26403 1.07947 5.17373 1.20696C5.08495 1.3323 4.9899 1.49651 4.88536 1.67711L0.751783 8.81693C0.646828 8.99818 0.551451 9.16289 0.486781 9.30268C0.421056 9.44475 0.349754 9.63572 0.372478 9.85369C0.401884 10.1357 0.549654 10.392 0.779012 10.5588C0.956259 10.6877 1.15726 10.7217 1.31314 10.736C1.46651 10.75 1.65684 10.75 1.86628 10.75H10.1334C10.3429 10.75 10.5332 10.75 10.6866 10.736C10.8425 10.7217 11.0435 10.6877 11.2207 10.5588C11.4501 10.392 11.5978 10.1357 11.6272 9.85369C11.65 9.63572 11.5787 9.44475 11.5129 9.30268C11.4483 9.1629 11.3529 8.9982 11.248 8.81697L7.11436 1.67709C7.00983 1.49651 6.91477 1.3323 6.82599 1.20696C6.73569 1.07947 6.60593 0.923011 6.40616 0.834185ZM6.49988 4.5C6.49988 4.22386 6.27602 4 5.99988 4C5.72374 4 5.49988 4.22386 5.49988 4.5V6.5C5.49988 6.77614 5.72374 7 5.99988 7C6.27602 7 6.49988 6.77614 6.49988 6.5V4.5ZM5.99988 8C5.72374 8 5.49988 8.22386 5.49988 8.5C5.49988 8.77614 5.72374 9 5.99988 9H6.00488C6.28102 9 6.50488 8.77614 6.50488 8.5C6.50488 8.22386 6.28102 8 6.00488 8H5.99988Z","fill":"currentColor"},"children":[]}]}]},"name":"AlertTriangle"}');let tJ=d.forwardRef((e,t)=>(0,c.jsx)(e$,{...e,ref:t,data:tG}));tJ.displayName="AlertTriangle";let t$=(0,c.jsx)("svg",{className:"absolute text-white h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:(0,c.jsx)("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})}),tK=e=>{let{position:t="top",triggerMethod:r="hover",popupContent:a,children:l}=e,[s,n]=(0,d.useState)(!1);return(0,c.jsxs)(tZ,{open:s,onOpenChange:n,placement:t,offset:10,children:[(0,c.jsx)(tO,{onClick:()=>"click"===r&&n(e=>!e),onMouseEnter:()=>"hover"===r&&n(!0),onMouseLeave:()=>"hover"===r&&n(!1),children:l}),(0,c.jsx)(tU,{className:"z-[999]",children:(0,c.jsxs)("div",{className:"relative px-3 py-2 text-xs font-normal text-gray-700 bg-white rounded-md shadow-lg",children:[a,t$]})})]})};var tW=d.memo(tK);let tY=e=>{let{list:t,readonly:r,onRemove:a,onReUpload:l,onImageLinkLoadSuccess:s,onImageLinkLoadError:n}=e,{t:i}=(0,m.$G)(),[u,p]=(0,d.useState)(""),h=e=>{e.type===o.remote_url&&s&&-1!==e.progress&&s(e._id)},g=e=>{e.type===o.remote_url&&n&&n(e._id)};return(0,c.jsxs)("div",{className:"flex flex-wrap",children:[t.map(e=>(0,c.jsxs)("div",{className:"group relative mr-1 border-[0.5px] border-black/5 rounded-lg",children:[e.type===o.local_file&&100!==e.progress&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-[1] bg-black/30",style:{left:e.progress>-1?"".concat(e.progress,"%"):0},children:-1===e.progress&&(0,c.jsx)(tz,{className:"w-5 h-5 text-white",onClick:()=>l&&l(e._id)})}),e.progress>-1&&(0,c.jsxs)("span",{className:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] text-sm text-white mix-blend-lighten z-[1]",children:[e.progress,"%"]})]}),e.type===o.remote_url&&100!==e.progress&&(0,c.jsxs)("div",{className:"\n                  absolute inset-0 flex items-center justify-center rounded-lg z-[1] border\n                  ".concat(-1===e.progress?"bg-[#FEF0C7] border-[#DC6803]":"bg-black/[0.16] border-transparent","\n                "),children:[e.progress>-1&&(0,c.jsx)(e6,{className:"animate-spin w-5 h-5 text-white"}),-1===e.progress&&(0,c.jsx)(tW,{popupContent:i("common.imageUploader.pasteImageLinkInvalid"),children:(0,c.jsx)(tJ,{className:"w-4 h-4 text-[#DC6803]"})})]}),(0,c.jsx)("img",{className:"w-16 h-16 rounded-lg object-cover cursor-pointer border-[0.5px] border-black/5",alt:"",onLoad:()=>h(e),onError:()=>g(e),src:e.type===o.remote_url?e.url:e.base64Url,onClick:()=>100===e.progress&&p(e.type===o.remote_url?e.url:e.base64Url)}),!r&&(0,c.jsx)("div",{className:"\n                    absolute z-10 -top-[9px] -right-[9px] items-center justify-center w-[18px] h-[18px] \n                    bg-white hover:bg-gray-50 border-[0.5px] border-black/[0.02] rounded-2xl shadow-lg\n                    cursor-pointer\n                    ".concat(-1===e.progress?"flex":"hidden group-hover:flex","\n                  "),onClick:()=>a&&a(e._id),children:(0,c.jsx)(eK,{className:"w-3 h-3 text-gray-500"})})]},e._id)),u&&(0,c.jsx)(eW,{url:u,onCancel:()=>p("")})]})},tX=()=>{let{t:e}=(0,m.$G)(),{notify:t}=_,[r,a]=(0,d.useState)([]),l=(0,d.useRef)([]),s=e=>{let t=l.current,r=t.findIndex(t=>t._id===e._id);if(r>-1){let s=t[r],n=[...t.slice(0,r),{...s,...e},...t.slice(r+1)];a(n),l.current=n}else{let r=[...t,e];a(r),l.current=r}},n=e=>{let t=l.current,r=t.findIndex(t=>t._id===e);if(r>-1){let e=t[r],s=[...t.slice(0,r),{...e,deleted:!0},...t.slice(r+1)];a(s),l.current=s}},o=e=>{let t=l.current,r=t.findIndex(t=>t._id===e);if(r>-1){let e=t[r],s=[...t.slice(0,r),{...e,progress:-1},...t.slice(r+1)];l.current=s,a(s)}},i=e=>{let t=l.current,r=t.findIndex(t=>t._id===e);if(r>-1){let e=t[r],s=[...t.slice(0,r),{...e,progress:100},...t.slice(r+1)];l.current=s,a(s)}},c=r=>{let s=l.current,n=s.findIndex(e=>e._id===r);if(n>-1){let r=s[n];tN({file:r.file,onProgressCallback:e=>{let t=[...s.slice(0,n),{...r,progress:e},...s.slice(n+1)];l.current=t,a(t)},onSuccessCallback:e=>{let t=[...s.slice(0,n),{...r,fileId:e.id,progress:100},...s.slice(n+1)];l.current=t,a(t)},onErrorCallback:()=>{t({type:"error",message:e("common.imageUploader.uploadFromComputerUploadError")});let o=[...s.slice(0,n),{...r,progress:-1},...s.slice(n+1)];l.current=o,a(o)}})}},u=()=>{a([]),l.current=[]},p=(0,d.useMemo)(()=>r.filter(e=>!e.deleted),[r]);return{files:p,onUpload:s,onRemove:n,onImageLinkLoadError:o,onImageLinkLoadSuccess:i,onReUpload:c,onClear:u}},tQ=e=>{let{chatList:t,feedbackDisabled:r=!1,isHideSendInput:a=!1,onFeedback:l,checkCanSend:s,onSend:n=()=>{},useCurrentUserAvatar:i,isResponsing:u,controlClearQuery:p,visionConfig:h}=e,{t:g}=(0,m.$G)(),{notify:x}=_,f=(0,d.useRef)(!1),[y,b]=d.useState(""),w=e=>{let t=e.target.value;b(t)},j=e=>{x({type:"error",message:e,duration:3e3})},C=()=>!!y&&""!==y.trim()||(j("Message cannot be empty"),!1);(0,d.useEffect)(()=>{p&&b("")},[p]);let{files:N,onUpload:k,onRemove:S,onReUpload:I,onImageLinkLoadError:P,onImageLinkLoadSuccess:T,onClear:M}=tX(),L=()=>{C()&&(!s||s())&&(n(y,N.filter(e=>-1!==e.progress).map(e=>({type:"image",transfer_method:e.type,url:e.url,upload_file_id:e.fileId}))),N.find(e=>e.type===o.local_file&&!e.fileId)||(N.length&&M(),u||b("")))};(0,d.useEffect)(()=>{let e=(0,eR.io)("https://idomy.cn");return e.on("connect",()=>{console.log("Connected to WebSocket server")}),e.on("new_text",e=>{console.log("Received new_text data:",e),b(e.query),n(e.query,[]),u||b("")}),()=>{e.disconnect()}},[]);let E=e=>{"Enter"!==e.code||(e.preventDefault(),e.shiftKey||f.current||L())},R=e=>{f.current=e.nativeEvent.isComposing,"Enter"!==e.code||e.shiftKey||(b(y.replace(/\n$/,"")),e.preventDefault())};return(0,c.jsxs)("div",{className:v()(!r&&"px-3.5","h-full"),children:[(0,c.jsx)("div",{className:"h-full space-y-[30px]",children:t.map(e=>{var a;if(e.isAnswer){let a=e.id===t[t.length-1].id;return(0,c.jsx)(tj,{item:e,feedbackDisabled:r,onFeedback:l,isResponsing:u&&a},e.id)}return(0,c.jsx)(t_,{id:e.id,content:e.content,useCurrentUserAvatar:i,imgSrcs:e.message_files&&(null===(a=e.message_files)||void 0===a?void 0:a.length)>0?e.message_files.map(e=>e.url):[]},e.id)})}),!a&&(0,c.jsx)("div",{className:v()(!r&&"!left-3.5 !right-3.5","absolute z-10 bottom-0 left-0 right-0"),children:(0,c.jsxs)("div",{className:"p-[5.5px] max-h-[150px] bg-white border-[1.5px] border-gray-200 rounded-xl overflow-y-auto",children:[(null==h?void 0:h.enabled)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center",children:[(0,c.jsx)(tB,{settings:h,onUpload:k,disabled:N.length>=h.number_limits}),(0,c.jsx)("div",{className:"mx-1 w-[1px] h-4 bg-black/5"})]}),(0,c.jsx)("div",{className:"pl-[52px]",children:(0,c.jsx)(tY,{list:N,onRemove:S,onReUpload:I,onImageLinkLoadSuccess:T,onImageLinkLoadError:P})})]}),(0,c.jsx)(eE.Z,{className:"\n                  block w-full px-2 pr-[118px] py-[7px] leading-5 max-h-none text-sm text-gray-700 outline-none appearance-none resize-none\n                  ".concat((null==h?void 0:h.enabled)&&"pl-12","\n                "),value:y,onChange:w,onKeyUp:E,onKeyDown:R,autoSize:!0}),(0,c.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-center h-8",children:[(0,c.jsx)("div",{className:"".concat(eZ().count," mr-4 h-5 leading-5 text-sm bg-gray-50 text-gray-500"),children:y.trim().length}),(0,c.jsx)(tc,{selector:"send-tip",htmlContent:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{children:[g("common.operation.send")," Enter"]}),(0,c.jsxs)("div",{children:[g("common.operation.lineBreak")," Shift Enter"]})]}),children:(0,c.jsx)("div",{className:"".concat(eZ().sendBtn," w-8 h-8 cursor-pointer rounded-md"),onClick:L})})]})]})})]})};var t0=d.memo(tQ),t1=r(1712),t5=r(4602);t5.ZP.use(m.Db).init({lng:"en",fallbackLng:"en",resources:{en:{translation:{common:{api:{success:"Success",saved:"Saved",create:"Created"},operation:{confirm:"Confirm",cancel:"Cancel",clear:"Clear",save:"Save",edit:"Edit",refresh:"Restart",search:"Search",send:"Send",lineBreak:"Line break",like:"like",dislike:"dislike",ok:"OK"},imageUploader:{uploadFromComputer:"Upload from Computer",uploadFromComputerReadError:"Image reading failed, please try again.",uploadFromComputerUploadError:"Image upload failed, please upload again.",uploadFromComputerLimit:"Upload images cannot exceed {{size}} MB",pasteImageLink:"Paste image link",pasteImageLinkInputPlaceholder:"Paste image link here",pasteImageLinkInvalid:"Invalid image link",imageUpload:"Image Upload"}},app:{common:{welcome:"Welcome to use",appUnavailable:"App is unavailable",appUnkonwError:"App is unavailable"},chat:{newChat:"New chat",newChatDefaultName:"New conversation",openingStatementTitle:"Opening statement",powerBy:"Powered by",prompt:"Prompt",privatePromptConfigTitle:"Conversation settings",publicPromptConfigTitle:"Initial Prompt",configStatusDes:"Before start, you can modify conversation settings",configDisabled:"Previous session settings have been used for this session.",startChat:"Start Chat",privacyPolicyLeft:"Please read the ",privacyPolicyMiddle:"privacy policy",privacyPolicyRight:" provided by the app developer."},errorMessage:{valueOfVarRequired:"Variables value can not be empty",waitForResponse:"Please wait for the response to the previous message to complete."}},tools:{title:"Tools",createCustomTool:"Create Custom Tool",type:{all:"All",builtIn:"Built-in",custom:"Custom"},contribute:{line1:"I'm interested in ",line2:"contributing tools to Dify.",viewGuide:"View the guide"},author:"By",auth:{unauthorized:"To Authorize",authorized:"Authorized",setup:"Set up authorization to use",setupModalTitle:"Set Up Authorization",setupModalTitleDescription:"After configuring credentials, all members within the workspace can use this tool when orchestrating applications."},includeToolNum:"{{num}} tools included",addTool:"Add Tool",createTool:{title:"Create Custom Tool",editAction:"Configure",editTitle:"Edit Custom Tool",name:"Name",toolNamePlaceHolder:"Enter the tool name",schema:"Schema",schemaPlaceHolder:"Enter your OpenAPI schema here",viewSchemaSpec:"View the OpenAPI-Swagger Specification",importFromUrl:"Import from URL",importFromUrlPlaceHolder:"https://...",urlError:"Please enter a valid URL",examples:"Examples",exampleOptions:{json:"Weather(JSON)",yaml:"Pet Store(YAML)",blankTemplate:"Blank Template"},availableTools:{title:"Available Tools",name:"Name",description:"Description",method:"Method",path:"Path",action:"Actions",test:"Test"},authMethod:{title:"Authorization method",type:"Authorization type",types:{none:"None",api_key:"API Key"},key:"Key",value:"Value"},privacyPolicy:"Privacy policy",privacyPolicyPlaceholder:"Please enter privacy policy"},test:{title:"Test",parametersValue:"Parameters & Value",parameters:"Parameters",value:"Value",testResult:"Test Results",testResultPlaceholder:"Test result will show here"},thought:{using:"Using",used:"Used",requestTitle:"Request to",responseTitle:"Response from"},setBuiltInTools:{info:"Info",setting:"Setting",toolDescription:"Tool description",parameters:"parameters",string:"string",number:"number",required:"Required",infoAndSetting:"Info & Settings"},noCustomTool:{title:"No custom tools!",content:"Add and manage your custom tools here for building AI apps.",createTool:"Create Tool"},noSearchRes:{title:"Sorry, no results!",content:"We couldn't find any tools that match your search.",reset:"Reset Search"},builtInPromptTitle:"Prompt",toolRemoved:"Tool removed",notAuthorized:"Tool not authorized"}}},"zh-Hans":{translation:{common:{api:{success:"成功",saved:"已保存",create:"已创建"},operation:{confirm:"确认",cancel:"取消",clear:"清空",save:"保存",edit:"编辑",refresh:"重新开始",search:"搜索",send:"发送",lineBreak:"换行",like:"赞同",dislike:"反对",ok:"好的"},imageUploader:{uploadFromComputer:"从本地上传",uploadFromComputerReadError:"图片读取失败，请重新选择。",uploadFromComputerUploadError:"图片上传失败，请重新上传。",uploadFromComputerLimit:"上传图片不能超过 {{size}} MB",pasteImageLink:"粘贴图片链接",pasteImageLinkInputPlaceholder:"将图像链接粘贴到此处",pasteImageLinkInvalid:"图片链接无效",imageUpload:"图片上传"}},app:{common:{welcome:"欢迎使用",appUnavailable:"应用不可用",appUnkonwError:"应用不可用"},chat:{newChat:"新对话",newChatDefaultName:"新的对话",openingStatementTitle:"对话开场白",powerBy:"Powered by",prompt:"提示词",privatePromptConfigTitle:"对话设置",publicPromptConfigTitle:"对话前提示词",configStatusDes:"开始前，您可以修改对话设置",configDisabled:"此次会话已使用上次会话表单",startChat:"开始对话",privacyPolicyLeft:"请阅读由该应用开发者提供的",privacyPolicyMiddle:"隐私政策",privacyPolicyRight:"。"},errorMessage:{valueOfVarRequired:"变量值必填",waitForResponse:"请等待上条信息响应完成"}},tools:{title:"工具",createCustomTool:"创建自定义工具",type:{all:"全部",builtIn:"内置",custom:"自定义"},contribute:{line1:"我有兴趣为 ",line2:"Dify 贡献工具。",viewGuide:"查看指南"},author:"作者",auth:{unauthorized:"去授权",authorized:"已授权",setup:"要使用请先授权",setupModalTitle:"设置授权",setupModalTitleDescription:"配置凭据后，工作区中的所有成员都可以在编排应用程序时使用此工具。"},includeToolNum:"包含 {{num}} 个工具",addTool:"添加工具",createTool:{title:"创建自定义工具",editAction:"编辑",editTitle:"编辑自定义工具",name:"名称",toolNamePlaceHolder:"输入工具名称",schema:"Schema",schemaPlaceHolder:"在此处输入您的 OpenAPI schema",viewSchemaSpec:"查看 OpenAPI-Swagger 规范",importFromUrl:"从 URL 中导入",importFromUrlPlaceHolder:"https://...",urlError:"请输入有效的 URL",examples:"例子",exampleOptions:{json:"天气(JSON)",yaml:"宠物商店(YAML)",blankTemplate:"空白模版"},availableTools:{title:"可用工具",name:"名称",description:"描述",method:"方法",path:"路径",action:"操作",test:"测试"},authMethod:{title:"鉴权方法",type:"鉴权类型",types:{none:"无",api_key:"API Key"},key:"键",value:"值"},privacyPolicy:"隐私协议",privacyPolicyPlaceholder:"请输入隐私协议"},thought:{using:"正在使用",used:"已使用",requestTitle:"请求来自",responseTitle:"响应来自"},setBuiltInTools:{info:"信息",setting:"设置",toolDescription:"工具描述",parameters:"参数",string:"字符串",number:"数字",required:"必填",infoAndSetting:"信息和设置"},noCustomTool:{title:"没有自定义工具!",content:"在此统一添加和管理你的自定义工具，方便构建应用时使用。",createTool:"创建工具"},noSearchRes:{title:"抱歉，没有结果！",content:"我们找不到任何与您的搜索相匹配的工具。",reset:"重置搜索"},builtInPromptTitle:"提示词",toolRemoved:"工具已被移除",notAuthorized:"工具未授权"}}}}});let t6=e=>{t5.ZP.changeLanguage(e)},t2=(e,t)=>{t1.Z.set("locale",e),t6(e),t||location.reload()};(s=i||(i={})).mobile="mobile",s.tablet="tablet",s.pc="pc";let t3=()=>{let[e,t]=d.useState(globalThis.innerWidth),r=e<=640?i.mobile:e<=768?i.tablet:i.pc;return d.useEffect(()=>{let e=()=>t(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r};r(9341);var t4=function(){let{type:e="area"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"area"};return(0,c.jsx)("div",{className:"flex w-full justify-center items-center ".concat("app"===e?"h-full":""),children:(0,c.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"spin-animation",children:[(0,c.jsxs)("g",{clipPath:"url(#clip0_324_2488)",children:[(0,c.jsx)("path",{d:"M15 0H10C9.44772 0 9 0.447715 9 1V6C9 6.55228 9.44772 7 10 7H15C15.5523 7 16 6.55228 16 6V1C16 0.447715 15.5523 0 15 0Z",fill:"#1C64F2"}),(0,c.jsx)("path",{opacity:"0.5",d:"M15 9H10C9.44772 9 9 9.44772 9 10V15C9 15.5523 9.44772 16 10 16H15C15.5523 16 16 15.5523 16 15V10C16 9.44772 15.5523 9 15 9Z",fill:"#1C64F2"}),(0,c.jsx)("path",{opacity:"0.1",d:"M6 9H1C0.447715 9 0 9.44772 0 10V15C0 15.5523 0.447715 16 1 16H6C6.55228 16 7 15.5523 7 15V10C7 9.44772 6.55228 9 6 9Z",fill:"#1C64F2"}),(0,c.jsx)("path",{opacity:"0.2",d:"M6 0H1C0.447715 0 0 0.447715 0 1V6C0 6.55228 0.447715 7 1 7H6C6.55228 7 7 6.55228 7 6V1C7 0.447715 6.55228 0 6 0Z",fill:"#1C64F2"})]}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_324_2488",children:(0,c.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})})};let t7=e=>{if(!e)return[];let t=[];return e.forEach(e=>{let r=!!e.paragraph,[a,l]=r?["paragraph",e.paragraph]:e["text-input"]?["string",e["text-input"]]:["select",e.select];"string"===a||"paragraph"===a?t.push({key:l.variable,name:l.label,required:l.required,type:a,max_length:l.max_length,options:[]}):t.push({key:l.variable,name:l.label,required:l.required,type:"select",options:l.options})}),t},t8=e=>{let{isUnknwonReason:t,errMessage:r}=e,{t:a}=(0,m.$G)(),l=r;return r||(l=a(t?"app.common.appUnkonwError":"app.common.appUnavailable")),(0,c.jsxs)("div",{className:"flex items-center justify-center w-screen h-screen",children:[(0,c.jsx)("h1",{className:"mr-5 h-[50px] leading-[50px] pr-5 text-[24px] font-medium",style:{borderRight:"1px solid rgba(0,0,0,.3)"},children:r||t?500:404}),(0,c.jsx)("div",{className:"text-sm",children:l})]})};var t9=d.memo(t8);let re=e=>{if(!e||e.some(e=>void 0===e.position))return e;let t=[...e];return t.sort((e,t)=>e.position-t.position),t},rt=(e,t)=>e&&t?e.map(e=>{var r;return e.files&&(null===(r=e.files)||void 0===r?void 0:r.length)>0?{...e,message_files:e.files.map(e=>t.find(t=>t.id===e))}:e}):e,rr=()=>{let{t:e}=(0,m.$G)(),t=t3(),r=t===i.mobile,a=er&&ea,[l,s]=(0,d.useState)(!1),[g,f]=(0,d.useState)(!1),[v,y]=(0,d.useState)(null),[b,w]=(0,d.useState)(!1),[j,{setTrue:C,setFalse:N}]=(0,p.Z)(!1),[k,S]=(0,d.useState)({enabled:!1,number_limits:2,detail:n.low,transfer_methods:[o.local_file]});(0,d.useEffect)(()=>{(null==el?void 0:el.title)&&(document.title="".concat(el.title," - Powered by Dify"))},[null==el?void 0:el.title]),(0,d.useEffect)(()=>((0,u.Fl)(!1),()=>{(0,u.Fl)(!0)}),[]);let{conversationList:I,setConversationList:P,currConversationId:T,getCurrConversationId:M,setCurrConversationId:L,getConversationIdFromStorage:R,isNewConversation:F,currConversationInfo:Z,currInputs:O,newConversationInputs:U,resetNewConversationInputs:D,setCurrInputs:A,setNewConversationInfo:V,setExistConversationInfo:H}=x(),[B,q,z]=(0,h.Z)(!1),[G,{setTrue:J,setFalse:$}]=(0,p.Z)(!1),K=e=>{ec(),q(!0),A(e),J(),es(em("",e))},W=!F||G,Y=(null==Z?void 0:Z.name)||e("app.chat.newChatDefaultName"),X=(null==Z?void 0:Z.introduction)||"",Q=()=>{if(!b)return;let e="",t={};if(F)A(t=U);else{let r=I.find(e=>e.id===T);A(t=(null==r?void 0:r.inputs)||{}),e=(null==r?void 0:r.introduction)||"",H({name:(null==r?void 0:r.name)||"",introduction:e})}F||B||eu||eP(T).then(r=>{let{data:a}=r,l=em(e,t);a.forEach(e=>{var t,r;l.push({id:"question-".concat(e.id),content:e.query,isAnswer:!1,message_files:(null===(t=e.message_files)||void 0===t?void 0:t.filter(e=>"user"===e.belongs_to))||[]}),l.push({id:e.id,content:e.answer,agent_thoughts:rt(e.agent_thoughts?re(e.agent_thoughts):e.agent_thoughts,e.message_files),feedback:e.feedback,isAnswer:!0,message_files:(null===(r=e.message_files)||void 0===r?void 0:r.filter(e=>"assistant"===e.belongs_to))||[]})}),es(l)}),F&&G&&es(em())};(0,d.useEffect)(Q,[T,b]);let ee=e=>{"-1"===e?(ec(),q(!0)):q(!1),L(e,er),N()},[et,es,en]=(0,h.Z)([]),eo=(0,d.useRef)(null);(0,d.useEffect)(()=>{eo.current&&(eo.current.scrollTop=eo.current.scrollHeight)},[et,T]);let ei=!et.some(e=>!1===e.isAnswer)&&F,ec=()=>{I.some(e=>"-1"===e.id)||P((0,u.ZP)(I,t=>{t.unshift({id:"-1",name:e("app.chat.newChatDefaultName"),inputs:U,introduction:X})}))},em=(e,t)=>{let r=e||X||"",a=t||O||null;if(r&&a){var l,s;l=r,s=(null==v?void 0:v.prompt_variables)||[],r=l.replace(/\{\{([^}]+)\}\}/g,(e,t)=>{let r=a[t];if(r)return r;let l=s.find(e=>e.key===t);return l?"{{".concat(l.key,"}}"):e})}let n={id:"".concat(Date.now()),content:r,isAnswer:!0,feedbackDisabled:!0,isOpeningStatement:!1};return r?[n]:[]};(0,d.useEffect)(()=>{if(!a){s(!0);return}(async()=>{try{let[t,r]=await Promise.all([eI(),eT()]),{data:a}=t,l=R(er),s=a.some(e=>e.id===l),{user_input_form:n,opening_statement:o,file_upload:i,system_parameters:c}=r;t2(el.default_language,!0),V({name:e("app.chat.newChatDefaultName"),introduction:o});let d=t7(n);y({prompt_template:"I want you to act as a javascript console.",prompt_variables:d}),S({...null==i?void 0:i.image,image_file_size_limit:(null==c?void 0:c.system_parameters)||0}),P(a),s&&L(l,er,!1),w(!0)}catch(e){404===e.status||f(!0),s(!0)}})()},[]);let[eu,{setTrue:ep,setFalse:eh}]=(0,p.Z)(!1),[eg,ex]=(0,d.useState)(null),{notify:ev}=_,ey=e=>{ev({type:"error",message:e})},eb=()=>{if("-1"!==T||!O||!(null==v?void 0:v.prompt_variables))return!0;let t=Object.values(O).length,r=v.prompt_variables.length,a=t<r||Object.values(O).find(e=>!e);return!a||(ey(e("app.errorMessage.valueOfVarRequired")),!1)},[ew,ej]=(0,d.useState)(0),[eC,e_]=(0,d.useState)([]),[eN,ek]=(0,d.useState)(""),[eE,eR,eF]=(0,h.Z)(!1),[eZ,eO,eU]=(0,h.Z)(!0),[eD,eA]=(0,d.useState)(""),eV=e=>{let{responseItem:t,questionId:r,placeholderAnswerId:a,questionItem:l}=e,s=(0,u.ZP)(en().filter(e=>e.id!==t.id&&e.id!==a),e=>{e.find(e=>e.id===r)||e.push({...l}),e.push({...t})});es(s)},eH=async(t,r)=>{if(eu){ev({type:"info",message:e("app.errorMessage.waitForResponse")});return}let a={inputs:O,query:t,conversation_id:F?null:T};(null==k?void 0:k.enabled)&&r&&(null==r?void 0:r.length)>0&&(a.files=r.map(e=>e.transfer_method===o.local_file?{...e,url:""}:e));let l="question-".concat(Date.now()),s={id:l,content:t,isAnswer:!1,message_files:r},n="answer-placeholder-".concat(Date.now()),i=[...en(),s,{id:n,content:"",isAnswer:!0}];es(i);let c=!1,d={id:"".concat(Date.now()),content:"",agent_thoughts:[],message_files:[],isAnswer:!0},m=!1,p=M()||"-1",h="";ep(),eS(a,{getAbortController:e=>{ex(e)},onData:(e,t,r)=>{let{conversationId:a,messageId:o,taskId:i}=r;if(c){var u,g;let t=null===(u=d.agent_thoughts)||void 0===u?void 0:u[(null===(g=d.agent_thoughts)||void 0===g?void 0:g.length)-1];t&&(t.thought=t.thought+e)}else d.content=d.content+e;if(o&&!m&&(d.id=o,m=!0),t&&a&&(h=a),ek(i),p!==M()){eO(!1);return}eV({responseItem:d,questionId:l,placeholderAnswerId:n,questionItem:s})},async onCompleted(e){if(!e){if(z()){let{data:e}=await eI(),t=await eL(e[0].id),r=(0,u.ZP)(e,e=>{e[0].name=t.name});P(r)}q(!1),D(),$(),L(h,er,!0),eh()}},onFile(e){var t,r;let a=null===(t=d.agent_thoughts)||void 0===t?void 0:t[(null===(r=d.agent_thoughts)||void 0===r?void 0:r.length)-1];a&&(a.message_files=[...a.message_files,{...e}]),eV({responseItem:d,questionId:l,placeholderAnswerId:n,questionItem:s})},onThought(e){c=!0;let t=d;if(e.message_id&&!m&&(t.id=e.message_id,m=!0),0===t.agent_thoughts.length)t.agent_thoughts.push(e);else{let r=t.agent_thoughts[t.agent_thoughts.length-1];r.id===e.id?(e.thought=r.thought,e.message_files=r.message_files,d.agent_thoughts[t.agent_thoughts.length-1]=e):d.agent_thoughts.push(e)}if(p!==M())return eO(!1),!1;eV({responseItem:d,questionId:l,placeholderAnswerId:n,questionItem:s})},onMessageEnd:e=>{var t;if(null===(t=e.metadata)||void 0===t?void 0:t.annotation_reply){d.id=e.id,d.annotation={id:e.metadata.annotation_reply.id,authorName:e.metadata.annotation_reply.account.name};let t=(0,u.ZP)(en().filter(e=>e.id!==d.id&&e.id!==n),e=>{e.find(e=>e.id===l)||e.push({...s}),e.push({...d})});es(t);return}let r=(0,u.ZP)(en().filter(e=>e.id!==d.id&&e.id!==n),e=>{e.find(e=>e.id===l)||e.push({...s}),e.push({...d})});es(r)},onMessageReplace:e=>{es((0,u.ZP)(en(),t=>{let r=t.find(t=>t.id===e.id);r&&(r.content=e.answer)}))},onError(){eh(),es((0,u.ZP)(en(),e=>{e.splice(e.findIndex(e=>e.id===n),1)}))}})},eB=async(t,r)=>{await eM({url:"/messages/".concat(t,"/feedbacks"),body:{rating:r.rating}});let a=et.map(e=>e.id===t?{...e,feedback:r}:e);es(a),ev({type:"success",message:e("common.api.success")})},eq=()=>er&&el&&v?(0,c.jsx)(E,{list:I,onCurrentIdChange:ee,currentId:T,copyRight:el.copyright||el.title}):null;return l?(0,c.jsx)(t9,{isUnknwonReason:g,errMessage:a?"":"Please set APP_ID and API_KEY in config/index.tsx"}):er&&el&&v?(0,c.jsxs)("div",{className:"bg-gray-100",children:[(0,c.jsx)(ef,{title:el.title,isMobile:r,onShowSideBar:C,onCreateNewChat:()=>ee("-1")}),(0,c.jsxs)("div",{className:"flex rounded-t-2xl bg-white overflow-hidden",children:[!r&&eq(),r&&j&&(0,c.jsx)("div",{className:"fixed inset-0 z-50",style:{backgroundColor:"rgba(35, 56, 118, 0.2)"},onClick:N,children:(0,c.jsx)("div",{className:"inline-block",onClick:e=>e.stopPropagation(),children:eq()})}),(0,c.jsxs)("div",{className:"flex-grow flex flex-col h-[calc(100vh_-_3rem)] overflow-y-auto",children:[(0,c.jsx)(ed,{conversationName:Y,hasSetInputs:W,isPublicVersion:!1,siteInfo:el,promptConfig:v,onStartChat:K,canEidtInpus:ei,savedInputs:O,onInputsChange:A}),W&&(0,c.jsx)("div",{className:"relative grow h-[200px] pc:w-[794px] max-w-full mobile:w-full pb-[66px] mx-auto mb-3.5 overflow-hidden",children:(0,c.jsx)("div",{className:"h-full overflow-y-auto",ref:eo,children:(0,c.jsx)(t0,{chatList:et,onSend:eH,onFeedback:eB,isResponsing:eu,checkCanSend:eb,visionConfig:k})})})]})]})]}):(0,c.jsx)(t4,{type:"app"})};var ra=d.memo(rr)},9341:function(){},1571:function(e){e.exports={appIcon:"style_appIcon__G5ePF",large:"style_large__n_DE8",small:"style_small__S2FSo",xs:"style_xs__eJYKU",tiny:"style_tiny__qqPS4",rounded:"style_rounded__sJ5kM"}},6595:function(e){e.exports={item:"style_item__iswpu","img-2":"style_img-2__Nn6NI","img-4":"style_img-4__46STa"}},8138:function(e){e.exports={"dot-flashing":"style_dot-flashing__BKXc3",text:"style_text___m3NV",avatar:"style_avatar__nq0IG","dot-flashing-avatar":"style_dot-flashing-avatar__N4gVo"}},8334:function(e){e.exports={answerIcon:"style_answerIcon__PjZle",typeingIcon:"style_typeingIcon__D3MOH",questionIcon:"style_questionIcon__vmwTr",answer:"style_answer__BBg2K",question:"style_question__8cWai",answerWrap:"style_answerWrap__Yu2nN",itemOperation:"style_itemOperation__mnZtG",textArea:"style_textArea__ia_QD",count:"style_count__40F_r",sendBtn:"style_sendBtn__7Zif5"}},6376:function(e){e.exports={boxShodow:"style_boxShodow__ZKBoi"}},4414:function(e){e.exports={boxShodow:"style_boxShodow__I_wtB",bgGrayColor:"style_bgGrayColor__porcw",headerBg:"style_headerBg__4w97U",formLabel:"style_formLabel__e7YiO",customBtn:"style_customBtn__em5f5",logo:"style_logo__s2JXK"}}},function(e){e.O(0,[774,659,93,667,139,744],function(){return e(e.s=8479)}),_N_E=e.O()}]);